!function(){"use strict";var e=function(e,t,i){this.leJeu=e,this.lesFleches=this.leJeu.input.keyboard.createCursorKeys(),Phaser.Sprite.call(this,this.leJeu,0,0,"persosImg"),this.animations.add("droite",[32,33],6,!0),this.animations.add("gauche",[34,35],6,!0),this.animations.add("bas",[36,37],6,!0),this.animations.add("haut",[38,39],6,!0),this.frame=32,this.vitessePacman=i,this.leJeu.physics.enable(this,Phaser.Physics.ARCADE),this.body.setSize(26,26,2,2),this.powerUp=!1,this.dureePowerUp=0,this.sonPowerUp=this.leJeu.add.audio("sonPowerUp",1,!0),t.add(this)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.setPositionDepart=function(e,t){this.position.x=e,this.position.y=t},e.prototype.gererDeplacement=function(e){this.leJeu.device.desktop?this.gererDeplacementDesktop():this.gererDeplacementMobile(e)},e.prototype.gererDeplacementDesktop=function(){this.body.velocity.set(0),this.lesFleches.right.isDown?(this.body.velocity.x=this.vitessePacman,this.play("droite")):this.lesFleches.left.isDown&&(this.body.velocity.x=-this.vitessePacman,this.play("gauche")),this.lesFleches.up.isDown?(this.body.velocity.y=-this.vitessePacman,this.play("haut")):this.lesFleches.down.isDown&&(this.body.velocity.y=this.vitessePacman,this.play("bas")),0==this.body.velocity.x&&0==this.body.velocity.y&&this.animations.stop()},e.prototype.gererDeplacementMobile=function(e){this.body.velocity.set(0),this.posDeplacement={pacmanX:this.body.position.x-e,pacmanY:this.body.position.y,pointeurX:this.leJeu.input.pointer1.position.x,pointeurY:this.leJeu.input.pointer1.position.y},this.posDeplacement.diffX=this.posDeplacement.pointeurX-this.posDeplacement.pacmanX,this.posDeplacement.diffY=this.posDeplacement.pointeurY-this.posDeplacement.pacmanY,this.posDeplacement.prioriteHorizontale=Math.abs(this.posDeplacement.diffX)>Math.abs(this.posDeplacement.diffY),this.leJeu.input.pointer1.isDown?(this.posDeplacement.diffX>20?this.body.velocity.x=this.vitessePacman:this.posDeplacement.diffX<-20?this.body.velocity.x=-this.vitessePacman:this.body.velocity.x=0,this.posDeplacement.diffY<-20?this.body.velocity.y=-this.vitessePacman:this.posDeplacement.diffY>20?this.body.velocity.y=this.vitessePacman:this.body.velocity.y=0,this.posDeplacement.prioriteHorizontale?this.body.velocity.x>0?this.play("droite"):this.body.velocity.x<0?this.play("gauche"):this.animations.stop():this.body.velocity.y>0?this.play("bas"):this.body.velocity.y<0?this.play("haut"):this.animations.stop()):(this.body.velocity.x=0,this.body.velocity.y=0,this.animations.stop())},e.prototype.activerPowerUp=function(){this.dureePowerUp=JEU_PACMAN_RUNNER.DUREE_POWERUP,this.powerUp=!0,this.sonPowerUp.play()},e.prototype.desactiverPowerUp=function(){this.powerUp=!1,this.sonPowerUp.pause()},e.prototype.updateDureePowerUp=function(e){this.dureePowerUp>0&&(this.dureePowerUp--,e.scale.x=this.dureePowerUp/JEU_PACMAN_RUNNER.DUREE_POWERUP*2.1),this.powerUp&&this.dureePowerUp<=0&&this.desactiverPowerUp()},window.Pacman=e}();